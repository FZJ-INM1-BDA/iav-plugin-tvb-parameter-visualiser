var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function l(e){e.forEach(t)}function a(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function c(e,t){e.appendChild(t)}function r(e,t,n){e.insertBefore(t,n||null)}function i(e){e.parentNode.removeChild(e)}function o(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function d(e){return document.createElement(e)}function u(e){return document.createTextNode(e)}function f(){return u(" ")}function m(){return u("")}function p(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function g(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function h(e,t){t=""+t,e.data!==t&&(e.data=t)}let _;function v(e){_=e}function $(){if(!_)throw new Error("Function called outside component initialization");return _}function y(e){$().$$.before_update.push(e)}function b(e){$().$$.on_mount.push(e)}function x(){const e=$();return(t,n)=>{const l=e.$$.callbacks[t];if(l){const a=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);l.slice().forEach(t=>{t.call(e,a)})}}}const w=[],k=[],N=[],L=[],I=Promise.resolve();let E=!1;function A(e){N.push(e)}let F=!1;const D=new Set;function T(){if(!F){F=!0;do{for(let e=0;e<w.length;e+=1){const t=w[e];v(t),V(t.$$)}for(w.length=0;k.length;)k.pop()();for(let e=0;e<N.length;e+=1){const t=N[e];D.has(t)||(D.add(t),t())}N.length=0}while(w.length);for(;L.length;)L.pop()();E=!1,F=!1,D.clear()}}function V(e){if(null!==e.fragment){e.update(),l(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(A)}}const C=new Set;function P(e,t){e&&e.i&&(C.delete(e),e.i(t))}function H(e,t,n,l){if(e&&e.o){if(C.has(e))return;C.add(e),(void 0).c.push(()=>{C.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}}function S(e){e&&e.c()}function M(e,n,s){const{fragment:c,on_mount:r,on_destroy:i,after_update:o}=e.$$;c&&c.m(n,s),A(()=>{const n=r.map(t).filter(a);i?i.push(...n):l(n),e.$$.on_mount=[]}),o.forEach(A)}function O(e,t){const n=e.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function U(e,t){-1===e.$$.dirty[0]&&(w.push(e),E||(E=!0,I.then(T)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function j(t,a,s,c,r,o,d=[-1]){const u=_;v(t);const f=a.props||{},m=t.$$={fragment:null,ctx:null,props:o,update:e,not_equal:r,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:d};let p=!1;if(m.ctx=s?s(t,f,(e,n,...l)=>{const a=l.length?l[0]:n;return m.ctx&&r(m.ctx[e],m.ctx[e]=a)&&(m.bound[e]&&m.bound[e](a),p&&U(t,e)),n}):[],m.update(),p=!0,l(m.before_update),m.fragment=!!c&&c(m.ctx),a.target){if(a.hydrate){const e=function(e){return Array.from(e.childNodes)}(a.target);m.fragment&&m.fragment.l(e),e.forEach(i)}else m.fragment&&m.fragment.c();a.intro&&P(t.$$.fragment),M(t,a.target,a.anchor),T()}v(u)}class B{$destroy(){O(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function z(e,t,n){const l=e.slice();return l[5]=t[n],l}function G(e){let t,n=e[2]&&q(e);return{c(){n&&n.c(),t=m()},m(e,l){n&&n.m(e,l),r(e,t,l)},p(e,l){e[2]?n?n.p(e,l):(n=q(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&i(t)}}}function R(e){let t,n=e[0],l=[];for(let t=0;t<n.length;t+=1)l[t]=K(z(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=m()},m(e,n){for(let t=0;t<l.length;t+=1)l[t].m(e,n);r(e,t,n)},p(e,a){if(1&a){let s;for(n=e[0],s=0;s<n.length;s+=1){const c=z(e,n,s);l[s]?l[s].p(c,a):(l[s]=K(c),l[s].c(),l[s].m(t.parentNode,t))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(e){o(l,e),e&&i(t)}}}function q(e){let t,n;return{c(){t=d("option"),n=u(e[2]),t.__value=e[2],t.value=t.__value},m(e,l){r(e,t,l),c(t,n)},p(e,l){4&l&&h(n,e[2]),4&l&&(t.__value=e[2]),t.value=t.__value},d(e){e&&i(t)}}}function K(e){let t,n,l,a,s=e[5]+"";return{c(){t=d("option"),n=u(s),l=f(),t.__value=a=e[5],t.value=t.__value},m(e,a){r(e,t,a),c(t,n),c(t,l)},p(e,l){1&l&&s!==(s=e[5]+"")&&h(n,s),1&l&&a!==(a=e[5])&&(t.__value=a),t.value=t.__value},d(e){e&&i(t)}}}function W(t){let n,l,a,s,o;function u(e,t){return(null==a||1&t)&&(a=!!(e[0]&&Array.isArray(e[0])&&e[0].length>0)),a?R:G}let f=u(t,-1),m=f(t);return{c(){n=d("select"),l=d("option"),l.textContent="-- select --\n  ",m.c(),l.__value="null",l.value=l.__value,l.disabled=!0,n.disabled=t[1]},m(e,a,i){r(e,n,a),c(n,l),m.m(n,null),s=t[2]||"null";for(var d=0;d<n.options.length;d+=1){var u=n.options[d];if(u.__value===s){u.selected=!0;break}}i&&o(),o=p(n,"change",t[3])},p(e,[t]){if(f===(f=u(e,t))&&m?m.p(e,t):(m.d(1),m=f(e),m&&(m.c(),m.m(n,null))),4&t&&s!==(s=e[2]||"null"))for(var l=0;l<n.options.length;l+=1){var a=n.options[l];if(a.__value===s){a.selected=!0;break}}2&t&&(n.disabled=e[1])},i:e,o:e,d(e){e&&i(n),m.d(),o()}}}function J(e,t,n){let{inputList:l}=t,{disabled:a}=t,{selectedVal:s}=t;const c=x();return e.$set=e=>{"inputList"in e&&n(0,l=e.inputList),"disabled"in e&&n(1,a=e.disabled),"selectedVal"in e&&n(2,s=e.selectedVal)},[l,a,s,function(e){const t=e.srcElement.value;c("selectChanged",{value:t})}]}class Q extends B{constructor(e){super(),j(this,e,J,W,s,{inputList:0,disabled:1,selectedVal:2})}}function X(e){return d3.extent(e.map(e=>d3.extent(e)).reduce((e,t)=>e.concat(t),[]))}function Y(t){let n;return{c(){n=d("div"),n.textContent="No datas to display"},m(e,t){r(e,n,t)},p:e,d(e){e&&i(n)}}}function Z(t){let n;return{c(){n=d("div"),g(n,"class","graph-container svelte-rklmzr")},m(e,l){r(e,n,l),t[5](n)},p:e,d(e){e&&i(n),t[5](null)}}}function ee(t){let n;function l(e,t){return e[0]&&e[0].length>0?Z:Y}let a=l(t),s=a(t);return{c(){s.c(),n=m()},m(e,t){s.m(e,t),r(e,n,t)},p(e,[t]){a===(a=l(e))&&s?s.p(e,t):(s.d(1),s=a(e),s&&(s.c(),s.m(n.parentNode,n)))},i:e,o:e,d(e){s.d(e),e&&i(n)}}}function te(e,t,n){let l,a,{datas:s}=t;const c={left:40,top:0,right:10,bottom:20};let{yDomain:r}=t;return y(()=>{if(s&&l){for(;l.children[0];)l.removeChild(l.children[0]);const{left:t,right:n,top:a,bottom:i}=c,o=l.clientWidth-t-n,d=l.clientHeight-a-i,u=d3.scaleLinear().range([0,o]),f=d3.scaleLinear().range([d,0]),m=d3.select(l).append("svg").attr("width","100%").attr("height","100%").append("g").attr("transform",`translate(${t}, ${a})`),p=d3.max(s.map(e=>e.length));u.domain([0,p]),f.domain(r||X(s));for(const t in s){const n=d3.line().x(e=>u(e.x)).y(e=>f(e.y));m.append("path").attr("fill","none").attr("stroke-width","1px").attr("stroke",(e=t,`hsl(${97*e}, 100%, 50%)`)).data([s[t].map((e,t)=>({x:t,y:e}))]).attr("d",n)}m.append("g").attr("transform",`translate(0, ${d})`).call(d3.axisBottom(u)),m.append("g").call(d3.axisLeft(f))}var e}),b(()=>(a=interactiveViewer.pluginControl.loadExternalLibraries(["d3@5.7.0"]),()=>{interactiveViewer.pluginControl.unloadExternalLibraries(["d3@5.7.0"])})),e.$set=e=>{"datas"in e&&n(0,s=e.datas),"yDomain"in e&&n(2,r=e.yDomain)},[s,l,r,a,c,function(e){k[e?"unshift":"push"](()=>{n(1,l=e)})}]}class ne extends B{constructor(e){var t;super(),document.getElementById("svelte-rklmzr-style")||((t=d("style")).id="svelte-rklmzr-style",t.textContent=".graph-container.svelte-rklmzr{height:20rem}",c(document.head,t)),j(this,e,te,ee,s,{datas:0,yDomain:2})}}const le=[];function ae(t){let n;return{c(){n=d("span"),n.textContent="Please select a dataset/file/trackIndex"},m(e,t){r(e,n,t)},p:e,d(e){e&&i(n)}}}function se(e){let t;function n(e,t){return e[2]?re:ce}let l=n(e),a=l(e);return{c(){a.c(),t=m()},m(e,n){a.m(e,n),r(e,t,n)},p(e,s){l===(l=n(e))&&a?a.p(e,s):(a.d(1),a=l(e),a&&(a.c(),a.m(t.parentNode,t)))},d(e){a.d(e),e&&i(t)}}}function ce(e){let t,n,a,s;return{c(){t=d("img"),g(t,"class",n="w-100 "+(e[3]?"loading":"")+" svelte-1oofayw"),t.src!==(a=e[1])&&g(t,"src",a),g(t,"alt","Frequency graph generated from the parameters.")},m(n,a,c){r(n,t,a),c&&l(s),s=[p(t,"error",e[4]),p(t,"load",e[5])]},p(e,l){8&l&&n!==(n="w-100 "+(e[3]?"loading":"")+" svelte-1oofayw")&&g(t,"class",n),2&l&&t.src!==(a=e[1])&&g(t,"src",a)},d(e){e&&i(t),l(s)}}}function re(e){let t,n,l,a;return{c(){t=d("span"),n=u("Freqency graph for channel "),l=u(e[0]),a=u(" cannot be found")},m(e,s){r(e,t,s),c(t,n),c(t,l),c(t,a)},p(e,t){1&t&&h(l,e[0])},d(e){e&&i(t)}}}function ie(t){let n;function l(e,t){return e[1]?se:ae}let a=l(t),s=a(t);return{c(){s.c(),n=m()},m(e,t){s.m(e,t),r(e,n,t)},p(e,[t]){a===(a=l(e))&&s?s.p(e,t):(s.d(1),s=a(e),s&&(s.c(),s.m(n.parentNode,n)))},i:e,o:e,d(e){s.d(e),e&&i(n)}}}function oe(t,n,l){let a,c,{selectedDataset:r}=n,{selectedFile:i}=n,{selectedTrackIndex:o}=n,d=!1;const u=function(t,n=e){let l;const a=[];function c(e){if(s(t,e)&&(t=e,l)){const e=!le.length;for(let e=0;e<a.length;e+=1){const n=a[e];n[1](),le.push(n,t)}if(e){for(let e=0;e<le.length;e+=2)le[e][0](le[e+1]);le.length=0}}}return{set:c,update:function(e){c(e(t))},subscribe:function(s,r=e){const i=[s,r];return a.push(i),1===a.length&&(l=n(c)||e),s(t),()=>{const e=a.indexOf(i);-1!==e&&a.splice(e,1),0===a.length&&(l(),l=null)}}}}(null),f=u.subscribe(e=>{e!==a&&(l(2,c=null),l(3,d=!0),l(1,a=e))});var m;return m=f,$().$$.on_destroy.push(m),y(()=>{if(r&&i&&(0===o||o)){const e=new URL(`${__HOSTNAME__}/data/get_tf_plot`);e.searchParams.set("kgDatasetId",r),e.searchParams.set("filename",i),e.searchParams.set("dkLabelIndex",o),u.set(e.toString())}else u.set(null)}),t.$set=e=>{"selectedDataset"in e&&l(6,r=e.selectedDataset),"selectedFile"in e&&l(7,i=e.selectedFile),"selectedTrackIndex"in e&&l(0,o=e.selectedTrackIndex)},[o,a,c,d,function(e){l(2,c=e)},function(){l(3,d=!1)},r,i]}class de extends B{constructor(e){var t;super(),document.getElementById("svelte-1oofayw-style")||((t=d("style")).id="svelte-1oofayw-style",t.textContent="img.svelte-1oofayw{transition:opacity ease-in-out 200ms}.loading.svelte-1oofayw{opacity:0.2}",c(document.head,t)),j(this,e,oe,ie,s,{selectedDataset:6,selectedFile:7,selectedTrackIndex:0})}}function ue(e,t,n){const l=e.slice();return l[25]=t[n],l}function fe(e){let t,n,l,a,s,o,m,_=e[25]+"";function v(...t){return e[23](e[25],...t)}return{c(){t=d("div"),n=d("span"),l=u(_),a=f(),s=d("button"),s.textContent="Ã—",o=f(),g(s,"class","close"),g(t,"class","d-inline-block d-flex align-items-center")},m(e,i,d){r(e,t,i),c(t,n),c(n,l),c(t,a),c(t,s),c(t,o),d&&m(),m=p(s,"click",v)},p(t,n){e=t,128&n&&_!==(_=e[25]+"")&&h(l,_)},d(e){e&&i(t),m()}}}function me(e){let t,n,l,a,s,o,m,_=e[4][e[5]]?"Pin (alt/option + w)":"Hover or select area";return{c(){t=d("div"),n=d("i"),l=f(),a=d("span"),s=u(_),g(n,"class","fas fa-thumbtack"),g(t,"class",o="mt-2 btn btn-dark "+(e[4][e[5]]?"":"tvb-plugin-muted")+" svelte-1mng8sy")},m(i,o,d){r(i,t,o),c(t,n),c(t,l),c(t,a),c(a,s),d&&m(),m=p(t,"click",e[12])},p(e,n){48&n&&_!==(_=e[4][e[5]]?"Pin (alt/option + w)":"Hover or select area")&&h(s,_),48&n&&o!==(o="mt-2 btn btn-dark "+(e[4][e[5]]?"":"tvb-plugin-muted")+" svelte-1mng8sy")&&g(t,"class",o)},d(e){e&&i(t),m()}}}function pe(e){let t,n,l,a,s,u,m,p,h,_,v,$,y,b,x,w,k,N,L,I,E,A;const F=new Q({props:{inputList:e[0],disabled:e[6],selectedVal:e[1]}});F.$on("selectChanged",e[8]);const D=new Q({props:{inputList:e[2],disabled:e[6]||!e[1],selectedVal:e[3]}});D.$on("selectChanged",e[9]);const T=new Q({props:{inputList:e[4].map(ge),disabled:e[6]||!e[3],selectedVal:e[5]}});T.$on("selectChanged",e[10]);let V=e[7],C=[];for(let t=0;t<V.length;t+=1)C[t]=fe(ue(e,V,t));let U=!e[6]&&me(e);const j=new ne({props:{datas:[...e[7],e[5]].map(e[24]).filter(he),yDomain:X(e[4])}}),B=new de({props:{selectedDataset:e[1],selectedFile:e[3],selectedTrackIndex:e[5]}});return{c(){t=d("div"),n=d("div"),l=d("label"),l.textContent="Select dataset",a=f(),S(F.$$.fragment),s=f(),u=d("div"),m=d("label"),m.textContent="Select file",p=f(),S(D.$$.fragment),_=f(),v=d("div"),$=d("label"),$.textContent="Select index",y=f(),S(T.$$.fragment),x=f(),w=d("div");for(let e=0;e<C.length;e+=1)C[e].c();k=f(),U&&U.c(),N=f(),L=d("div"),S(j.$$.fragment),I=f(),E=d("div"),S(B.$$.fragment),g(l,"class","d-inline-block"),g(n,"class","d-flex flex-column"),g(m,"class","d-inline-block"),g(u,"class",h="d-flex flex-column pt-2 "+(e[1]?"":"tvb-plugin-muted")+" svelte-1mng8sy"),g($,"class","d-inline-block"),g(v,"class",b="d-flex flex-column pt-2 "+(e[1]&&e[3]?"":"tvb-plugin-muted")+" svelte-1mng8sy"),g(w,"class","d-flex pt-2 flex-row flex-wrap"),g(L,"class","d-flex flex-column pt-2"),g(E,"class","d-flex pt-2"),g(t,"class","d-flex flex-column m-2")},m(e,i){r(e,t,i),c(t,n),c(n,l),c(n,a),M(F,n,null),c(t,s),c(t,u),c(u,m),c(u,p),M(D,u,null),c(t,_),c(t,v),c(v,$),c(v,y),M(T,v,null),c(t,x),c(t,w);for(let e=0;e<C.length;e+=1)C[e].m(w,null);c(t,k),U&&U.m(t,null),c(t,N),c(t,L),M(j,L,null),c(t,I),c(t,E),M(B,E,null),A=!0},p(e,[n]){const l={};1&n&&(l.inputList=e[0]),64&n&&(l.disabled=e[6]),2&n&&(l.selectedVal=e[1]),F.$set(l);const a={};4&n&&(a.inputList=e[2]),66&n&&(a.disabled=e[6]||!e[1]),8&n&&(a.selectedVal=e[3]),D.$set(a),(!A||2&n&&h!==(h="d-flex flex-column pt-2 "+(e[1]?"":"tvb-plugin-muted")+" svelte-1mng8sy"))&&g(u,"class",h);const s={};if(16&n&&(s.inputList=e[4].map(ge)),72&n&&(s.disabled=e[6]||!e[3]),32&n&&(s.selectedVal=e[5]),T.$set(s),(!A||10&n&&b!==(b="d-flex flex-column pt-2 "+(e[1]&&e[3]?"":"tvb-plugin-muted")+" svelte-1mng8sy"))&&g(v,"class",b),2176&n){let t;for(V=e[7],t=0;t<V.length;t+=1){const l=ue(e,V,t);C[t]?C[t].p(l,n):(C[t]=fe(l),C[t].c(),C[t].m(w,null))}for(;t<C.length;t+=1)C[t].d(1);C.length=V.length}e[6]?U&&(U.d(1),U=null):U?U.p(e,n):(U=me(e),U.c(),U.m(t,N));const c={};176&n&&(c.datas=[...e[7],e[5]].map(e[24]).filter(he)),16&n&&(c.yDomain=X(e[4])),j.$set(c);const r={};2&n&&(r.selectedDataset=e[1]),8&n&&(r.selectedFile=e[3]),32&n&&(r.selectedTrackIndex=e[5]),B.$set(r)},i(e){A||(P(F.$$.fragment,e),P(D.$$.fragment,e),P(T.$$.fragment,e),P(j.$$.fragment,e),P(B.$$.fragment,e),A=!0)},o(e){H(F.$$.fragment,e),H(D.$$.fragment,e),H(T.$$.fragment,e),H(j.$$.fragment,e),H(B.$$.fragment,e),A=!1},d(e){e&&i(t),O(F),O(D),O(T),o(C,e),U&&U.d(),O(j),O(B)}}}const ge=(e,t)=>t,he=e=>!!e;function _e(e,t,n){let l,{datasetArray:a=[]}=t,{selectedDataset:s=null}=t,{fetchedFiles:c=[]}=t,{selectedFile:r=null}=t,{fetchedDataFromFile:i=[]}=t,{staticFlag:o}=t,{selectedTrackIndex:d}=t,{selectedTrackIndices:u=[]}=t;const f=new Set;let m=[];const p=()=>{n(0,a=[]),n(1,s=null),fetch(`${__HOSTNAME__}/data/`).then(e=>e.json()).then(e=>{n(0,a=e)})};function g(){n(2,c=[]),n(3,r=null);const e=new URL(`${__HOSTNAME__}/data/get_filtered_filenames`);e.searchParams.set("kgDatasetId",s),fetch(e).then(e=>e.json()).then(e=>{n(2,c=e.map(({name:e})=>e))})}function h(e){n(5,d=e),n(13,u=[e])}function _(e){f.add(e),n(7,m=Array.from(f))}function v(e){f.delete(e),n(7,m=Array.from(f))}function $(e){f.has(e)?v(e):_(e)}async function y(){for(await new Promise(e=>setTimeout(e,1e3));;)try{const e=await interactiveViewer.uiHandle.getUserToSelectARegion("TVB IAV plugin: click any region to toggle pin region"),{layer:t,segment:n}=e||{},{name:a}=t||{};if(l&&a===l){const e=n&&n.replace&&n.replace(l,"");if(/^#[1-9][0-9]*$/.test(e)){$(Number(e.replace("#","")))}else console.log("does not check out",e)}}catch(e){}}b(()=>{const e=[];if(o){if(r&&s){const e=new URL(`${__HOSTNAME__}/data/get_matrix`);e.searchParams.set("filename",r),e.searchParams.set("kgDatasetId",s),fetch(e).then(e=>e.json()).then(e=>{n(4,i=e)})}}else{p(),y(),interactiveViewer.viewerHandle.setLayerVisibility({name:/jubrain/},!1);const t={};l=`${__PLUGIN_NAME__}-DK68`,t[l]={type:"segmentation",source:`nifti://${__HOSTNAME__}/data/public/aparcaseg.nii.gz`,selectedOpacity:.5},interactiveViewer.viewerHandle.loadLayer(t),e.push(interactiveViewer.viewerHandle.mouseOverNehubaLayers.subscribe(e=>{if(n(5,d=null),e){const t=e.find(({layer:e})=>e.name===`${__PLUGIN_NAME__}-DK68`);if(t){const e=/#([0-9]{1,})$/.exec(t.segment);e&&h(Number(e[1]))}}}))}return()=>{for(o||(interactiveViewer.viewerHandle.setLayerVisibility({name:/jubrain/},!0),interactiveViewer.viewerHandle.removeLayer({name:`${__PLUGIN_NAME__}-DK68`}));e.length>0;)e.pop().unsubscribe()}});return e.$set=e=>{"datasetArray"in e&&n(0,a=e.datasetArray),"selectedDataset"in e&&n(1,s=e.selectedDataset),"fetchedFiles"in e&&n(2,c=e.fetchedFiles),"selectedFile"in e&&n(3,r=e.selectedFile),"fetchedDataFromFile"in e&&n(4,i=e.fetchedDataFromFile),"staticFlag"in e&&n(6,o=e.staticFlag),"selectedTrackIndex"in e&&n(5,d=e.selectedTrackIndex),"selectedTrackIndices"in e&&n(13,u=e.selectedTrackIndices)},[a,s,c,r,i,d,o,m,function(e){n(1,s=e.detail.value),g()},function(e){n(4,i=[]),n(3,r=e.detail.value);const t=new URL(`${__HOSTNAME__}/data/get_matrix`);t.searchParams.set("filename",r),t.searchParams.set("kgDatasetId",s),fetch(t).then(e=>e.json()).then(e=>{n(4,i=e)})},function(e){const t=e.detail.value;h(Number(t))},v,function(){$(d)},u,l,f,p,g,h,_,$,function(){const e=new URL(`${__HOSTNAME__}/frontend/manifest.json`);e.searchParams.set("selectedDataset",s),e.searchParams.set("selectedFile",r),e.searchParams.set("selectedTrackIndices",u.join(",")),fetch(e).then(e=>e.json()).then(e=>{interactiveViewer.uiHandle.launchNewWidget(e)})},y,e=>v(e),e=>i[e]]}class ve extends B{constructor(e){var t;super(),document.getElementById("svelte-1mng8sy-style")||((t=d("style")).id="svelte-1mng8sy-style",t.textContent=".tvb-plugin-muted.svelte-1mng8sy{opacity:0.5}",c(document.head,t)),j(this,e,_e,pe,s,{datasetArray:0,selectedDataset:1,fetchedFiles:2,selectedFile:3,fetchedDataFromFile:4,staticFlag:6,selectedTrackIndex:5,selectedTrackIndices:13})}}const $e=document.getElementById(`${__PLUGIN_NAME__}.container`),ye=$e.getAttribute("static-flag"),be=$e.getAttribute("selected-file"),xe=$e.getAttribute("selected-dataset"),we=$e.getAttribute("selected-track-index"),ke=$e.getAttribute("selected-track-indices");let Ne;return interactiveViewer.pluginControl.loadExternalLibraries(["d3@5.7.0"]).then(()=>{Ne=new ve({target:$e,props:{staticFlag:ye,selectedFile:be,selectedDataset:xe,selectedTrackIndex:we,selectedTrackIndices:ke&&ke.split(",").map(e=>Number(e)).filter(e=>NaN!==e)}}),interactiveViewer.pluginControl[__PLUGIN_NAME__].onShutdown(()=>{console.log(`onShutdown ${__PLUGIN_NAME__}`),Ne.$destroy()})}),Ne}();
//# sourceMappingURL=script.js.map
